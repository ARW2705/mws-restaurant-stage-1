"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})},window.fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");if(e)DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)});else{t("No restaurant id in URL",null)}}},window.fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name;var n=document.getElementById("restaurant-address"),t=e.address.indexOf(",")+1,r=[e.address.slice(0,t),"<br>",e.address.slice(t)].join("");n.innerHTML=r;var a=document.getElementById("restaurant-img");a.className="restaurant-img";var i=DBHelper.imageUrlForRestaurant(e),l=i.substring(4);a.src=i,a.alt=""+e.name,a.srcset="img/sizes/sm-"+l+".jpg 360w,\n                  img/sizes/md-"+l+".jpg 480w,\n                  img/sizes/lg-"+l+".jpg 800w,\n                  img/sizes/lg-"+l+".jpg 2x",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},window.fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=t,a.setAttribute("valign","top"),r.appendChild(a);var i=document.createElement("td"),l=e[t],d=l.indexOf(",")+1;if(0<d){var s=[l.slice(0,d),"<br>",l.slice(d)].join("");i.innerHTML=s}else i.innerHTML=e[t];r.appendChild(i),n.appendChild(r)}},window.fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container"),t=document.createElement("h3");if(t.innerHTML="Reviews",n.appendChild(t),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),n.appendChild(a)},window.createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("div");t.className="review-card-header";var r=document.createElement("div");r.className="review-card-body";var a=document.createElement("p");a.innerHTML=e.name,t.appendChild(a);var i=document.createElement("time");i.innerHTML=e.date,t.appendChild(i),n.appendChild(t);var l=document.createElement("p");l.innerHTML="Rating: "+e.rating,r.appendChild(l);var d=document.createElement("article");return d.innerHTML=e.comments,r.appendChild(d),n.appendChild(r),n},window.fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb");n.lastElementChild.removeAttribute("aria-current");var t=document.createElement("li");t.innerHTML=e.name,t.setAttribute("aria-current","page"),n.appendChild(t)},window.getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};